{% extends "base.njk" %}

{% block title %}Iniciar sesión – Museo Arqueológico{% endblock %}
{% block hero %}{% endblock %}

{% block contenido %}
<div class="columns is-centered">
  <div class="column is-4">
    <h1 class="title has-text-centered">Iniciar sesión</h1>
    {% if error %}
      <div id="server-error" class="notification is-danger">{{ error }}</div>
    {% endif %}
    <form id="login-form" action="/usuarios/login" method="POST" novalidate>
      <!-- Campo Correo -->
      <div class="field">
        <label class="label" for="correo">Correo</label>
        <div class="control has-icons-left has-icons-right">
          <input 
            id="correo" 
            class="input" 
            type="email" 
            name="correo" 
            placeholder="usuario@ejemplo.com" 
            required 
            autofocus
            aria-describedby="correo-error"
          >
          <span class="icon is-small is-left">
            <i class="fa fa-envelope"></i>
          </span>
          <span class="icon is-small is-right" id="correo-valid-icon" style="display: none;">
            <i class="fa fa-check"></i>
          </span>
        </div>
        <p id="correo-error" class="help is-danger" style="display: none;">Por favor introduce un email válido.</p>
      </div>

      <!-- Campo Contraseña -->
      <div class="field">
        <label class="label" for="password">Contraseña</label>
        <div class="control has-icons-left has-icons-right">
          <input 
            id="password" 
            class="input" 
            type="password" 
            name="password" 
            placeholder="Mínimo 8 caracteres" 
            required
            aria-describedby="password-error"
          >
          <span class="icon is-small is-left">
            <i class="fa fa-lock"></i>
          </span>
          <span class="icon is-small is-right toggle-password" style="cursor: pointer;">
            <i id="toggle-password-icon" class="fa fa-eye"></i>
          </span>
        </div>
        <p id="password-error" class="help is-danger" style="display: none;">La contraseña no puede estar vacía.</p>
      </div>

      <!-- Botón de envío -->
      <div class="field">
        <button id="login-button" class="button is-primary is-fullwidth">Acceder al Museo</button>
      </div>
    </form>

    <p class="has-text-centered">
      ¿No tienes cuenta? <a href="/usuarios/registro">Regístrate</a>
    </p>
  </div>
</div>

{# Incluir el fichero JS que controla el DOM de este formulario #}
<script src="/js/login.js"></script>
{% endblock %}
